<!doctype html>
<head>
<script type="text/javascript" src="/public/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="/public/jquery.url-0.0.1.js"></script>
  <script type="text/javascript" src="/public/jquery.WebSocket.js"></script>
</head>
<body style="margin-left:100px;">
<h2>
   <a href="http://www.translunardesigns.com" alt="Trans Lunar Designs" target="_blank" >
      <img src="/public/translunar.png" align="middle"/>REST Test
   </a>
</h2>
<h3>Websocket Test - Socket.io Server</h3>

<form name="inputForm" id="inputForm">
<table>
   <tr>
      <td>
         <input id="formButton" type="button" value="Start">
		     <input id="formButton2" type="button" value="Stop">
      </td>
   </tr>
</table>
</form>
  <P>Time: <span id='output'><span></p>
<p><a href="/public/index.html">Home</a></p>
<p>
<ol>
<li>Start the websocket</li>
<li>See the time update</li>
<li>Stop the websocket</li>
</ol>
</p>
<script type="text/javascript">
  var ws;
   $(document).ready(function() {
     $('#formButton').click(function() { formSubmit(); });
     $('#formButton2').click(function() { formSubmit2(); });
   });


  function updateStats(dateStr) {
    document.getElementById('output').innerHTML = dateStr;
  }

  function formSubmit() {
    var host = window.document.location.host.replace(/:.*/, '');
    ws = new WebSocket('ws://' + host + ':9997');
    ws.onmessage = function (event) {
      updateStats(JSON.parse(event.data));
    };
  }
  function formSubmit2() {
    ws.close();
  }


</script>

</body>
